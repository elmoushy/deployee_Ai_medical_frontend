(function(){"use strict";var t={3238:function(t,a,e){var s=e(6848),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("header",[e("div",{staticClass:"container"},[t._m(0),e("nav",[e("ul",[e("li",[e("router-link",{attrs:{to:"/",exact:""}},[t._v("Home")])],1),e("li",[e("router-link",{attrs:{to:"/reports"}},[t._v("Reports")])],1)])])])]),e("main",[e("router-view")],1)])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"logo"},[e("i",{staticClass:"fas fa-microscope"}),e("h1",[t._v("MediResearch")])])}],l={name:"App"},n=l,o=e(1656),c=(0,o.A)(n,i,r,!1,null,null,null),u=c.exports,d=e(6178),h=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"medical-research-container"},[t._m(0),t._v(" "),e("section",{staticClass:"search-section"},[e("div",{staticClass:"container"},[e("div",{staticClass:"form-container"},[t._m(1),e("form",{staticClass:"research-form",on:{submit:function(a){return a.preventDefault(),t.runPipeline.apply(null,arguments)}}},[e("div",{staticClass:"input-group"},[e("label",{staticClass:"input-label",attrs:{for:"condition"}},[t._v("Medical Condition")]),e("div",{staticClass:"input-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.condition,expression:"formData.condition"}],staticClass:"form-input",attrs:{type:"text",id:"condition",required:""},domProps:{value:t.formData.condition},on:{input:function(a){a.target.composing||t.$set(t.formData,"condition",a.target.value)}}}),t._m(2)])]),t._v(" "),e("div",{staticClass:"form-grid"},[e("div",{staticClass:"input-group"},[e("label",{staticClass:"input-label",attrs:{for:"trial-start-date"}},[t._v("Trial Start Date")]),e("div",{staticClass:"input-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.startDate,expression:"formData.startDate"}],staticClass:"form-input",attrs:{type:"date",id:"trial-start-date",required:""},domProps:{value:t.formData.startDate},on:{input:function(a){a.target.composing||t.$set(t.formData,"startDate",a.target.value)}}}),t._m(3)])]),e("div",{staticClass:"input-group"},[e("label",{staticClass:"input-label",attrs:{for:"trial-end-date"}},[t._v("Trial End Date")]),e("div",{staticClass:"input-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.endDate,expression:"formData.endDate"}],staticClass:"form-input",attrs:{type:"text",id:"trial-end-date",placeholder:"YYYY-MM-DD or MAX",required:""},domProps:{value:t.formData.endDate},on:{input:function(a){a.target.composing||t.$set(t.formData,"endDate",a.target.value)}}}),t._m(4)])])]),t._v(" "),e("div",{staticClass:"form-grid"},[e("div",{staticClass:"input-group"},[e("label",{staticClass:"input-label",attrs:{for:"pubmed-start-date"}},[t._v("PubMed Start Date")]),e("div",{staticClass:"input-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.pubmedStart,expression:"formData.pubmedStart"}],staticClass:"form-input",attrs:{type:"text",id:"pubmed-start-date",placeholder:"YYYY/MM/DD",required:""},domProps:{value:t.formData.pubmedStart},on:{input:function(a){a.target.composing||t.$set(t.formData,"pubmedStart",a.target.value)}}}),t._m(5)])]),e("div",{staticClass:"input-group"},[e("label",{staticClass:"input-label",attrs:{for:"pubmed-end-date"}},[t._v("PubMed End Date")]),e("div",{staticClass:"input-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.pubmedEnd,expression:"formData.pubmedEnd"}],staticClass:"form-input",attrs:{type:"text",id:"pubmed-end-date",placeholder:"YYYY/MM/DD",required:""},domProps:{value:t.formData.pubmedEnd},on:{input:function(a){a.target.composing||t.$set(t.formData,"pubmedEnd",a.target.value)}}}),t._m(6)])])]),t._v(" "),e("div",{staticClass:"input-group"},[e("label",{staticClass:"input-label",attrs:{for:"competitors"}},[t._v("Competitor Companies")]),e("div",{staticClass:"input-wrapper"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.competitors,expression:"formData.competitors"}],staticClass:"form-input",attrs:{type:"text",id:"competitors",placeholder:"e.g., AbbVie, Novartis",required:""},domProps:{value:t.formData.competitors},on:{input:function(a){a.target.composing||t.$set(t.formData,"competitors",a.target.value)}}}),t._m(7)]),e("p",{staticClass:"input-help"},[t._v("Enter company names separated by commas")])]),e("button",{staticClass:"submit-button",attrs:{type:"submit",disabled:t.isLoading}},[e("span",{staticClass:"button-icon"},[e("i",{class:t.isLoading?"fas fa-spinner fa-spin":"fas fa-play"})]),e("span",{staticClass:"button-text"},[t._v(t._s(t.isLoading?"Processing...":"Run Analysis"))])])]),t.errorMessage?e("div",{staticClass:"error-message"},[t._m(8),e("span",[t._v(t._s(t.errorMessage))])]):t._e()])])]),t._v(" "),t.isLoading?e("div",{staticClass:"loading-overlay"},[t._m(9)]):t._e(),t._v(" "),t.showResults?e("section",{staticClass:"results-section"},[e("div",{staticClass:"container"},[t._m(10),e("div",{staticClass:"stats-grid"},t._l(t.cardData,(function(a,s){return e("div",{key:s,staticClass:"stat-card"},[e("div",{staticClass:"stat-icon"},[e("i",{class:a.icon})]),e("div",{staticClass:"stat-content"},[e("div",{staticClass:"stat-value"},[t._v(t._s(a.value))]),e("div",{staticClass:"stat-label"},[t._v(t._s(a.title))])])])})),0),e("div",{staticClass:"metrics-section"},[t._m(11),e("div",{staticClass:"chart-container"},[e("canvas",{ref:"competitorsChart",attrs:{width:"400",height:"200"}})]),t.results.publication_metrics.length>0?e("div",{staticClass:"metrics-grid"},t._l(t.results.publication_metrics,(function(a,s){return e("div",{key:s,staticClass:"metric-card"},[e("div",{staticClass:"metric-header"},[e("h4",{staticClass:"competitor-name"},[t._v(t._s(a.competitor))])]),e("div",{staticClass:"metric-value"},[e("span",{staticClass:"count-number"},[t._v(t._s(a.count))]),e("span",{staticClass:"count-unit"},[t._v("publications")])]),e("div",{staticClass:"metric-progress"},[e("div",{staticClass:"progress-bar"},[e("div",{staticClass:"progress-fill",style:{width:t.calculatePercentage(a.count)+"%"}})])]),a.term?e("div",{staticClass:"metric-details"},[e("div",{staticClass:"detail-item"},[e("i",{staticClass:"fas fa-search"}),e("span",[t._v(t._s(a.term))])])]):t._e()])})),0):t._e()]),e("div",{staticClass:"action-center"},[e("div",{staticClass:"action-card"},[e("div",{staticClass:"action-content"},[e("h3",{staticClass:"action-title"},[t._v("Detailed Analysis Available")]),e("p",{staticClass:"action-description"},[t._v("Access comprehensive reports with advanced filtering and visualization options")]),e("button",{staticClass:"action-button",on:{click:t.navigateToReports}},[e("i",{staticClass:"fas fa-chart-line"}),e("span",[t._v("View Detailed Reports")])])])])])])]):t._e()])},p=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"hero-section"},[e("div",{staticClass:"container"},[e("div",{staticClass:"hero-content"},[e("h1",{staticClass:"main-heading"},[t._v("Clinical Trials & Research Publications")]),e("p",{staticClass:"hero-subtitle"},[t._v("Comprehensive analysis of medical research data and competitive intelligence")])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"form-header"},[e("h2",{staticClass:"form-title"},[t._v("Research Pipeline Configuration")]),e("p",{staticClass:"form-description"},[t._v("Configure your research parameters to analyze clinical trials and publications")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"input-icon"},[e("i",{staticClass:"fas fa-microscope"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"input-icon"},[e("i",{staticClass:"fas fa-calendar-alt"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"input-icon"},[e("i",{staticClass:"fas fa-calendar-check"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"input-icon"},[e("i",{staticClass:"fas fa-book-medical"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"input-icon"},[e("i",{staticClass:"fas fa-book-open"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"input-icon"},[e("i",{staticClass:"fas fa-building"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"error-icon"},[e("i",{staticClass:"fas fa-exclamation-triangle"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"loading-container"},[e("div",{staticClass:"loading-spinner"},[e("div",{staticClass:"spinner-ring"}),e("div",{staticClass:"spinner-ring"}),e("div",{staticClass:"spinner-ring"})]),e("div",{staticClass:"loading-content"},[e("h3",{staticClass:"loading-title"},[t._v("Analyzing Research Data")]),e("p",{staticClass:"loading-subtitle"},[t._v("Processing clinical trials and publications...")]),e("div",{staticClass:"progress-bar"},[e("div",{staticClass:"progress-fill"})])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"results-header"},[e("h2",{staticClass:"results-title"},[t._v("Analysis Results")]),e("p",{staticClass:"results-subtitle"},[t._v("Comprehensive overview of research data findings")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"section-header"},[e("h3",{staticClass:"section-title"},[e("i",{staticClass:"fas fa-chart-bar"}),t._v(" Publication Analysis by Competitor ")]),e("p",{staticClass:"section-description"},[t._v("Comparative analysis of research publication activity")])])}],v=(e(4114),e(8111),e(7588),e(1701),e(4373)),m=e(3861);const f="medical_research_user_token";function b(){const t=f+"=",a=decodeURIComponent(document.cookie),e=a.split(";");for(let s=0;s<e.length;s++){let a=e[s];while(" "===a.charAt(0))a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null}function _(t){const a=new Date;a.setTime(a.getTime()+2592e6);const e="expires="+a.toUTCString();document.cookie=`${f}=${t};${e};path=/`}function g(){return localStorage.getItem(f)}function C(t){localStorage.setItem(f,t)}function P(){document.cookie=`${f}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`,localStorage.removeItem(f),console.log("User token cleared")}function T(t){return!!t&&(_(t),C(t),console.log("Updated user token from pipeline response:",t),!0)}function y(){return b()||g()}var D={data(){return{isLoading:!1,showResults:!1,formData:{condition:"Dry Eye",startDate:"2023-01-01",endDate:"MAX",pubmedStart:"2023/01/01",pubmedEnd:"2025/01/01",competitors:"AbbVie, Novartis, Oyster Point, Eyenovia, Bausch",retries:3},results:{trials_fetched:0,trials_filtered:0,pubmed_count:0,message:"",publication_metrics:[]},chart:null,userToken:null,errorMessage:""}},computed:{cardData(){return[{title:"Trials Fetched",value:this.results.trials_fetched,icon:"fas fa-microscope"},{title:"Trials Filtered",value:this.results.trials_filtered,icon:"fas fa-filter"},{title:"PubMed Articles",value:this.results.pubmed_count,icon:"fas fa-book-open"}]}},methods:{validateDates(){const t=new Date(this.formData.startDate).getFullYear(),a=parseInt(this.formData.pubmedStart.split("/")[0]);return t<=2022||a<=2022?(this.errorMessage="Years 2022 and earlier are not allowed in demo version. Please use 2023 or later.",!1):(this.errorMessage="",!0)},deduplicateMetrics(t){const a=new Map;return t.forEach((t=>{a.set(t.competitor,t)})),Array.from(a.values())},async runPipeline(){if(this.validateDates()){this.isLoading=!0,this.showResults=!1,this.userToken=y();try{const t={condition:this.formData.condition,start_date:this.formData.startDate,end_date:this.formData.endDate,competitors:this.formData.competitors.split(",").map((t=>t.trim())),retries:this.formData.retries,pubmed_start:this.formData.pubmedStart,pubmed_end:this.formData.pubmedEnd};this.userToken&&(t.user_token=this.userToken);const a="https://lightidea.org:8001",e=await v.A.post(`${a}/pipeline-full`,t),s=e.data;s.publication_metrics&&s.publication_metrics.length>0&&(s.publication_metrics=this.deduplicateMetrics(s.publication_metrics)),this.results=s,e.data.user_token&&(this.userToken=e.data.user_token,T(this.userToken)),this.$nextTick((()=>this.updateChart())),this.showResults=!0}catch(t){alert("Pipeline request failed."),console.error("Error:",t)}finally{this.isLoading=!1}}},updateChart(){this.$nextTick((()=>{if(!this.$refs.competitorsChart)return void console.error("Chart canvas ref not found");const t=this.$refs.competitorsChart.getContext("2d");if(this.chart&&this.chart.destroy(),this.results.publication_metrics&&0!==this.results.publication_metrics.length)try{this.chart=new m.Ay(t,{type:"bar",data:{labels:this.results.publication_metrics.map((t=>t.competitor)),datasets:[{label:"Publications",data:this.results.publication_metrics.map((t=>t.count)),backgroundColor:["rgba(37, 99, 235, 0.6)","rgba(14, 165, 233, 0.6)","rgba(59, 130, 246, 0.6)","rgba(96, 165, 250, 0.6)","rgba(147, 197, 253, 0.6)"],borderColor:["rgba(37, 99, 235, 1)","rgba(14, 165, 233, 1)","rgba(59, 130, 246, 1)","rgba(96, 165, 250, 1)","rgba(147, 197, 253, 1)"],borderWidth:2,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Publications by Competitor",font:{size:16,weight:"bold"},color:"#1e293b"},legend:{display:!1},tooltip:{backgroundColor:"rgba(30, 41, 59, 0.9)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#2563eb",borderWidth:1,callbacks:{label:function(t){return`Publications: ${t.parsed.y}`}}}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1,color:"#64748b"},grid:{color:"#e2e8f0"}},x:{ticks:{color:"#64748b",maxRotation:45},grid:{display:!1}}},animation:{duration:1e3,easing:"easeOutQuart"}}})}catch(a){console.error("Error creating chart:",a)}else console.warn("No publication metrics data available for chart")}))},calculatePercentage(t){const a=Math.max(...this.results.publication_metrics.map((t=>t.count)));return t/a*100},navigateToReports(){this.$router.push({name:"Reports"})}},beforeDestroy(){this.chart&&this.chart.destroy()}},S=D,k=(0,o.A)(S,h,p,!1,null,"5733baa2",null),w=k.exports,I=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"reports-container"},[e("h1",{staticClass:"title"},[t._v("Clinical Trials & Publications")]),e("TokenUpdater",{staticClass:"token-updater-hidden",on:{"reload-data":t.loadData}}),t.loading.initial?t._e():e("div",{staticClass:"stats-container"},t._l(t.dashboardStats,(function(a,s){return e("div",{directives:[{name:"animate-on-scroll",rawName:"v-animate-on-scroll",value:"animate__fadeInUp",expression:"'animate__fadeInUp'"}],key:s,staticClass:"stat-card",style:{"animation-delay":.1*s+"s"}},[e("div",{staticClass:"stat-icon",class:a.icon}),e("div",{staticClass:"stat-content"},[e("h3",{staticClass:"stat-value"},[t._v(t._s(a.value))]),e("p",{staticClass:"stat-label"},[t._v(t._s(a.label))])])])})),0),t.loading.initial?t._e():e("div",{staticClass:"tabs-container"},[e("div",{staticClass:"tabs-header"},t._l(t.tabs,(function(a,s){return e("div",{key:s,staticClass:"tab",class:{active:t.activeTab===a.id},on:{click:function(e){return t.setActiveTab(a.id)}}},[e("i",{class:a.icon}),t._v(" "+t._s(a.name)+" ")])})),0),e("div",{staticClass:"tab-content"},["trials"===t.activeTab?e("div",{staticClass:"tab-pane"},[e("div",{staticClass:"search-filters"},[e("div",{staticClass:"search-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.trialsSearchQuery,expression:"trialsSearchQuery"}],attrs:{type:"text",placeholder:"Search trials by title, ID, sponsor..."},domProps:{value:t.trialsSearchQuery},on:{input:[function(a){a.target.composing||(t.trialsSearchQuery=a.target.value)},t.debounceTrialsSearch]}})]),e("div",{staticClass:"filters"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.trialsFilters.phase,expression:"trialsFilters.phase"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.trialsFilters,"phase",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("All Phases")]),e("option",{attrs:{value:"PHASE1"}},[t._v("Phase 1")]),e("option",{attrs:{value:"PHASE2"}},[t._v("Phase 2")]),e("option",{attrs:{value:"PHASE3"}},[t._v("Phase 3")]),e("option",{attrs:{value:"PHASE4"}},[t._v("Phase 4")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.trialsFilters.status,expression:"trialsFilters.status"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.trialsFilters,"status",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("All Statuses")]),e("option",{attrs:{value:"RECRUITING"}},[t._v("Recruiting")]),e("option",{attrs:{value:"COMPLETED"}},[t._v("Completed")]),e("option",{attrs:{value:"ACTIVE_NOT_RECRUITING"}},[t._v("Active, not recruiting")])])])]),t.loading.trials?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"spinner"}),e("p",[t._v("Loading clinical trials...")])]):e("div",[e("div",{staticClass:"data-table"},[e("table",[e("thead",[e("tr",[e("th",{on:{click:function(a){return t.sortData("trials","NCTId")}}},[t._v("ID "),e("i",{staticClass:"sort-icon",class:t.getSortIconClass("NCTId")})]),e("th",{on:{click:function(a){return t.sortData("trials","BriefTitle")}}},[t._v("Title "),e("i",{staticClass:"sort-icon",class:t.getSortIconClass("BriefTitle")})]),e("th",{on:{click:function(a){return t.sortData("trials","Phase")}}},[t._v("Phase "),e("i",{staticClass:"sort-icon",class:t.getSortIconClass("Phase")})]),e("th",{on:{click:function(a){return t.sortData("trials","OverallStatus")}}},[t._v("Status "),e("i",{staticClass:"sort-icon",class:t.getSortIconClass("OverallStatus")})]),e("th",{on:{click:function(a){return t.sortData("trials","SponsorName")}}},[t._v("Sponsor "),e("i",{staticClass:"sort-icon",class:t.getSortIconClass("SponsorName")})]),e("th",[t._v("Actions")])])]),e("tbody",t._l(t.paginatedTrials,(function(a,s){return e("tr",{directives:[{name:"animate-on-scroll",rawName:"v-animate-on-scroll",value:"animate__fadeIn",expression:"'animate__fadeIn'"}],key:s,style:{"animation-delay":.05*s+"s"}},[e("td",[t._v(t._s(a.NCTId))]),e("td",{staticClass:"title-cell"},[t._v(t._s(a.BriefTitle))]),e("td",[e("span",{staticClass:"phase-badge",class:t.getPhaseClass(a.Phase)},[t._v(t._s(a.Phase||"N/A"))])]),e("td",[e("span",{staticClass:"status-badge",class:t.getStatusClass(a.OverallStatus)},[t._v(t._s(a.OverallStatus))])]),e("td",[t._v(t._s(a.SponsorName))]),e("td",[e("button",{staticClass:"action-btn",on:{click:function(e){return t.showTrialDetails(a)}}},[e("i",{staticClass:"fas fa-eye"})])])])})),0)])]),e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:t.currentPage<=1},on:{click:function(a){return t.changePage(-1)}}},[t._v("« Previous")]),e("span",[t._v("Page "+t._s(t.currentPage)+" of "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage>=t.totalPages},on:{click:function(a){return t.changePage(1)}}},[t._v("Next »")])])])]):t._e(),"publications"===t.activeTab?e("div",{staticClass:"tab-pane"},[e("div",{staticClass:"search-filters"},[e("div",{staticClass:"search-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.pubsSearchQuery,expression:"pubsSearchQuery"}],attrs:{type:"text",placeholder:"Search publications by title, PMID, abstract..."},domProps:{value:t.pubsSearchQuery},on:{input:[function(a){a.target.composing||(t.pubsSearchQuery=a.target.value)},t.debouncePublicationsSearch]}})]),e("div",{staticClass:"filters"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.pubsFilters.pubYear,expression:"pubsFilters.pubYear"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.pubsFilters,"pubYear",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("All Years")]),e("option",{attrs:{value:"2023"}},[t._v("2023")]),e("option",{attrs:{value:"2022"}},[t._v("2022")]),e("option",{attrs:{value:"2021"}},[t._v("2021")]),e("option",{attrs:{value:"2020"}},[t._v("2020")]),e("option",{attrs:{value:"older"}},[t._v("Older")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.pubsFilters.journalType,expression:"pubsFilters.journalType"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.pubsFilters,"journalType",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("All Journals")]),e("option",{attrs:{value:"medical"}},[t._v("Medical")]),e("option",{attrs:{value:"clinical"}},[t._v("Clinical")]),e("option",{attrs:{value:"research"}},[t._v("Research")])])])]),t.loading.publications?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"spinner"}),e("p",[t._v("Loading publications...")])]):e("div",[e("div",{staticClass:"publications-grid"},t._l(t.paginatedPublications,(function(a,s){return e("div",{directives:[{name:"animate-on-scroll",rawName:"v-animate-on-scroll",value:"animate__fadeInUp",expression:"'animate__fadeInUp'"}],key:s,staticClass:"publication-card",style:{"animation-delay":.1*s+"s"},on:{click:function(e){return t.showPublicationDetails(a)}}},[e("h3",[t._v(t._s(a.TITLE))]),e("p",{staticClass:"pub-id"},[t._v("PMID: "+t._s(a.PMID))]),e("p",{staticClass:"abstract-preview"},[t._v(t._s(t.truncateText(a.ABSTRACT,200)))]),e("button",{staticClass:"read-more-btn"},[t._v("Read More")])])})),0),e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:t.currentPage<=1},on:{click:function(a){return t.changePage(-1)}}},[t._v("« Previous")]),e("span",[t._v("Page "+t._s(t.currentPage)+" of "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage>=t.totalPages},on:{click:function(a){return t.changePage(1)}}},[t._v("Next »")])])])]):t._e(),"matched"===t.activeTab?e("div",{staticClass:"tab-pane"},[e("div",{directives:[{name:"animate-on-scroll",rawName:"v-animate-on-scroll",value:"animate__fadeIn",expression:"'animate__fadeIn'"}],staticClass:"ai-summary-section"},[t._m(0),e("p",{staticClass:"ai-description"},[t._v("Generate an AI-powered summary of the relationships between clinical trials and publications")]),e("button",{staticClass:"ai-sum-btn",class:{loading:t.aiLoading},attrs:{disabled:t.aiLoading},on:{click:t.getAISummary}},[e("span",{staticClass:"btn-text"},[t._v(t._s(t.aiLoading?"Analyzing Data...":"Generate AI Summary"))]),e("span",{staticClass:"btn-icon"},[e("i",{staticClass:"fas",class:t.aiLoading?"fa-circle-notch fa-spin":"fa-wand-magic-sparkles"})])]),e("transition",{attrs:{name:"fade-slide"}},[t.aiError?e("div",{staticClass:"error"},[e("i",{staticClass:"fas fa-exclamation-circle"}),t._v(" "+t._s(t.aiError)+" ")]):t._e()]),e("transition",{attrs:{name:"fade-expand"}},[t.aiSummary?e("div",{staticClass:"ai-summary-content"},[e("div",{staticClass:"summary-header"},[e("i",{staticClass:"fas fa-lightbulb"}),e("h4",[t._v("AI Analysis Summary")])]),e("div",{staticClass:"summary-body",domProps:{innerHTML:t._s(t.aiSummary)}})]):t._e()])],1),e("br"),e("div",{staticClass:"search-filters"},[e("div",{staticClass:"search-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.matchedSearchQuery,expression:"matchedSearchQuery"}],attrs:{type:"text",placeholder:"Search matched results by trial ID, publication ID..."},domProps:{value:t.matchedSearchQuery},on:{input:[function(a){a.target.composing||(t.matchedSearchQuery=a.target.value)},t.debounceMatchedSearch]}})]),e("div",{staticClass:"filters"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.matchedFilters.similarityThreshold,expression:"matchedFilters.similarityThreshold"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.matchedFilters,"similarityThreshold",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0"}},[t._v("All Matches")]),e("option",{attrs:{value:"0.6"}},[t._v("High Similarity (> 60%)")]),e("option",{attrs:{value:"0.8"}},[t._v("Very High Similarity (> 80%)")]),e("option",{attrs:{value:"0.9"}},[t._v("Near Perfect Match (> 90%)")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.matchedFilters.trialPhase,expression:"matchedFilters.trialPhase"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.matchedFilters,"trialPhase",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:""}},[t._v("All Phases")]),e("option",{attrs:{value:"PHASE1"}},[t._v("Phase 1")]),e("option",{attrs:{value:"PHASE2"}},[t._v("Phase 2")]),e("option",{attrs:{value:"PHASE3"}},[t._v("Phase 3")]),e("option",{attrs:{value:"PHASE4"}},[t._v("Phase 4")])])])]),t.loading.matched?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"spinner"}),e("p",[t._v("Loading matched results...")])]):e("div",[e("div",{staticClass:"data-table"},[e("table",[e("thead",[e("tr",[e("th",{on:{click:function(a){return t.sortData("matched","NCTId")}}},[t._v("Trial ID "),e("i",{staticClass:"sort-icon",class:t.getSortIconClass("NCTId")})]),e("th",{on:{click:function(a){return t.sortData("matched","TrialTitle")}}},[t._v("Trial Title "),e("i",{staticClass:"sort-icon",class:t.getSortIconClass("TrialTitle")})]),e("th",{on:{click:function(a){return t.sortData("matched","BestPubPMID")}}},[t._v("Publication ID "),e("i",{staticClass:"sort-icon",class:t.getSortIconClass("BestPubPMID")})]),e("th",{on:{click:function(a){return t.sortData("matched","SimilarityScore")}}},[t._v("Similarity "),e("i",{staticClass:"sort-icon",class:t.getSortIconClass("SimilarityScore")})]),e("th",[t._v("Actions")])])]),e("tbody",t._l(t.paginatedMatched,(function(a,s){return e("tr",{directives:[{name:"animate-on-scroll",rawName:"v-animate-on-scroll",value:"animate__fadeIn",expression:"'animate__fadeIn'"}],key:s,style:{"animation-delay":.05*s+"s"}},[e("td",[t._v(t._s(a.NCTId))]),e("td",{staticClass:"title-cell"},[t._v(t._s(a.TrialTitle))]),e("td",[e("span",{staticClass:"pmid-link",on:{click:function(e){return t.fetchAndShowPubDetails(a.BestPubPMID)}}},[t._v(" "+t._s(a.BestPubPMID)+" ")])]),e("td",[e("div",{staticClass:"similarity-bar"},[e("div",{staticClass:"similarity-fill",style:{width:100*parseFloat(a.SimilarityScore)+"%"}}),e("span",[t._v(t._s((100*parseFloat(a.SimilarityScore)).toFixed(1))+"%")])])]),e("td",[e("button",{staticClass:"action-btn",on:{click:function(e){return t.showMatchDetails(a)}}},[e("i",{staticClass:"fas fa-link"})])])])})),0)])]),e("div",{staticClass:"pagination"},[e("button",{attrs:{disabled:t.currentPage<=1},on:{click:function(a){return t.changePage(-1)}}},[t._v("« Previous")]),e("span",[t._v("Page "+t._s(t.currentPage)+" of "+t._s(t.totalPages))]),e("button",{attrs:{disabled:t.currentPage>=t.totalPages},on:{click:function(a){return t.changePage(1)}}},[t._v("Next »")])])])]):t._e()])]),t.loading.initial?e("div",{staticClass:"initial-loading"},[e("div",{staticClass:"spinner large-spinner"}),e("h2",[t._v("Loading Research Data")]),e("p",[t._v("Fetching clinical trials and publications...")])]):t._e(),t.modalVisible&&t.selectedTrial?e("div",{staticClass:"modal"},[e("div",{directives:[{name:"animate-on-scroll",rawName:"v-animate-on-scroll",value:"animate__fadeInDown",expression:"'animate__fadeInDown'"}],staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h2",[t._v("Trial Details")]),e("button",{staticClass:"close-btn",on:{click:t.closeModal}},[t._v("×")])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"detail-section"},[e("h3",[t._v(t._s(t.selectedTrial.BriefTitle))]),e("div",{staticClass:"detail-row"},[e("strong",[t._v("NCT ID:")]),t._v(" "+t._s(t.selectedTrial.NCTId)+" ")]),e("div",{staticClass:"detail-row"},[e("strong",[t._v("Phase:")]),t._v(" "+t._s(t.selectedTrial.Phase||"N/A")+" ")]),e("div",{staticClass:"detail-row"},[e("strong",[t._v("Status:")]),t._v(" "+t._s(t.selectedTrial.OverallStatus)+" ")]),e("div",{staticClass:"detail-row"},[e("strong",[t._v("Sponsor:")]),t._v(" "+t._s(t.selectedTrial.SponsorName)+" ")]),e("div",{staticClass:"detail-row"},[e("strong",[t._v("Condition:")]),t._v(" "+t._s(t.selectedTrial.Condition)+" ")]),t.selectedTrial.BriefSummary?e("div",{staticClass:"detail-row"},[e("strong",[t._v("Summary:")]),e("p",[t._v(t._s(t.selectedTrial.BriefSummary))])]):t._e(),t.trialPublications.length>0?e("div",{staticClass:"associated-pubs"},[e("h4",[t._v("Associated Publications")]),t._l(t.trialPublications,(function(a,s){return e("div",{key:s,staticClass:"pub-item"},[e("strong",[t._v("PMID: "+t._s(a.BestPubPMID))]),t.pubDetails[a.BestPubPMID]?e("div",[e("p",[t._v(t._s(t.pubDetails[a.BestPubPMID].TITLE))]),e("button",{staticClass:"small-btn",on:{click:function(e){return t.showPublicationDetails(t.pubDetails[a.BestPubPMID])}}},[t._v(" View Details ")])]):e("div",[e("p",[t._v("Loading publication details...")])])])}))],2):t._e()])])])]):t._e(),t.modalVisible&&t.selectedPublication?e("div",{staticClass:"modal"},[e("div",{directives:[{name:"animate-on-scroll",rawName:"v-animate-on-scroll",value:"animate__fadeInDown",expression:"'animate__fadeInDown'"}],staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h2",[t._v("Publication Details")]),e("button",{staticClass:"close-btn",on:{click:t.closeModal}},[t._v("×")])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"detail-section"},[e("h3",[t._v(t._s(t.selectedPublication.TITLE))]),e("div",{staticClass:"detail-row"},[e("strong",[t._v("PMID:")]),t._v(" "+t._s(t.selectedPublication.PMID)+" ")]),e("div",{staticClass:"detail-row"},[e("strong",[t._v("Abstract:")]),e("p",[t._v(t._s(t.selectedPublication.ABSTRACT))])]),t.publicationTrials.length>0?e("div",{staticClass:"associated-trials"},[e("h4",[t._v("Associated Trials")]),t._l(t.publicationTrials,(function(a,s){return e("div",{key:s,staticClass:"trial-item"},[e("strong",[t._v(t._s(a.NCTId))]),e("p",[t._v(t._s(a.TrialTitle))]),e("div",{staticClass:"similarity-bar"},[e("div",{staticClass:"similarity-fill",style:{width:100*parseFloat(a.SimilarityScore)+"%"}}),e("span",{staticStyle:{color:"black"}},[t._v(t._s((100*parseFloat(a.SimilarityScore)).toFixed(1))+"% match")])]),e("br"),e("button",{staticClass:"small-btn",on:{click:function(e){return t.showTrialById(a.NCTId)}}},[t._v(" View Trial Details ")])])}))],2):t._e()])])])]):t._e(),t.modalVisible&&t.selectedMatch?e("div",{staticClass:"modal"},[e("div",{directives:[{name:"animate-on-scroll",rawName:"v-animate-on-scroll",value:"animate__fadeInDown",expression:"'animate__fadeInDown'"}],staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h2",[t._v("Match Details")]),e("button",{staticClass:"close-btn",on:{click:t.closeModal}},[t._v("×")])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"match-comparison"},[e("div",{staticClass:"comparison-item trial-item"},[e("h3",[t._v("Trial")]),e("h4",[t._v(t._s(t.selectedMatch.TrialTitle))]),e("p",[e("strong",[t._v("ID:")]),t._v(" "+t._s(t.selectedMatch.NCTId))]),t.matchTrialDetails?e("div",[e("p",[e("strong",[t._v("Phase:")]),t._v(" "+t._s(t.matchTrialDetails.Phase||"N/A"))]),e("p",[e("strong",[t._v("Status:")]),t._v(" "+t._s(t.matchTrialDetails.OverallStatus))]),e("p",[e("strong",[t._v("Sponsor:")]),t._v(" "+t._s(t.matchTrialDetails.SponsorName))]),e("button",{staticClass:"view-btn",on:{click:function(a){return t.showTrialById(t.selectedMatch.NCTId)}}},[t._v(" View Full Trial Details ")])]):e("div",{staticClass:"loading-small"},[e("div",{staticClass:"spinner small-spinner"}),e("span",[t._v("Loading trial details...")])])]),e("div",{staticClass:"comparison-arrow"},[e("div",{staticClass:"similarity-indicator"},[e("div",{staticClass:"similarity-circle"},[t._v(" "+t._s((100*parseFloat(t.selectedMatch.SimilarityScore)).toFixed(1))+"% ")]),e("div",[t._v("Similarity")])]),e("i",{staticClass:"fas fa-arrow-right"})]),e("div",{staticClass:"comparison-item pub-item"},[e("h3",[t._v("Publication")]),t.matchPubDetails?e("div",[e("h4",[t._v(t._s(t.matchPubDetails.TITLE))]),e("p",[e("strong",[t._v("PMID:")]),t._v(" "+t._s(t.matchPubDetails.PMID))]),e("div",{staticClass:"abstract-preview"},[t._m(1),e("p",[t._v(t._s(t.truncateText(t.matchPubDetails.ABSTRACT,300)))])]),e("button",{staticClass:"view-btn",on:{click:function(a){return t.showPublicationDetails(t.matchPubDetails)}}},[t._v(" View Full Publication ")])]):e("div",{staticClass:"loading-small"},[e("div",{staticClass:"spinner small-spinner"}),e("span",[t._v("Loading publication details...")])])])])])])]):t._e()],1)},A=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ai-section-header"},[e("div",{staticClass:"ai-icon-container"},[e("i",{staticClass:"fas fa-brain"})]),e("h3",[t._v("AI Research Insights")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",[e("strong",[t._v("Abstract:")])])}],M=(e(2489),e(116),e(7642),e(8004),e(3853),e(5876),e(2475),e(5024),e(1698),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"token-updater"},[t.showInputForm?e("div",{staticClass:"token-form"},[e("h3",[t._v("Enter User Token")]),e("p",[t._v("Please enter your user token to load your specific data:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tokenInput,expression:"tokenInput"}],attrs:{type:"text",placeholder:"e.g., 20250527_131815_cacf94db"},domProps:{value:t.tokenInput},on:{input:function(a){a.target.composing||(t.tokenInput=a.target.value)}}}),e("div",{staticClass:"token-actions"},[e("button",{staticClass:"save-btn",on:{click:t.saveToken}},[t._v("Save Token")]),e("button",{staticClass:"cancel-btn",on:{click:t.cancelInput}},[t._v("Cancel")])])]):e("div",{staticClass:"token-display"},[t.currentToken?[e("span",{staticClass:"token-info"},[e("i",{staticClass:"fas fa-key"}),t._v(" Using token: "),e("strong",[t._v(t._s(t.displayToken))])]),e("div",{staticClass:"token-actions"},[e("button",{staticClass:"change-btn",on:{click:t.changeToken}},[t._v("Change Token")]),e("button",{staticClass:"clear-btn",on:{click:t.clearUserToken}},[t._v("Clear Token")])])]:[e("span",{staticClass:"token-info"},[t._v("No user token set")]),e("button",{staticClass:"set-btn",on:{click:t.changeToken}},[t._v("Set Token")])]],2)])}),x=[],N={name:"TokenUpdater",data(){return{showInputForm:!1,tokenInput:"",currentToken:y()}},computed:{displayToken(){const t=this.currentToken;return t?t.length>10?`${t.substring(0,10)}...${t.substring(t.length-5)}`:t:""}},methods:{saveToken(){this.tokenInput.trim()&&(this.currentToken=this.tokenInput.trim(),_(this.currentToken),C(this.currentToken),this.showInputForm=!1,this.$emit("token-updated",this.currentToken),this.$emit("reload-data"))},changeToken(){this.tokenInput=this.currentToken||"",this.showInputForm=!0},cancelInput(){this.showInputForm=!1,this.tokenInput=""},clearUserToken(){P(),this.currentToken=null,this.$emit("token-updated",null),this.$emit("reload-data")}}},F=N,E=(0,o.A)(F,M,x,!1,null,"2f1e4c6e",null),$=E.exports,L={name:"ReportsView",components:{TokenUpdater:$},data(){return{trials:[],publications:[],matchedResults:[],allTrialsCsv:[],loading:{initial:!0,trials:!1,publications:!1,matched:!1},activeTab:"trials",currentPage:1,itemsPerPage:10,sortField:null,sortOrder:"asc",trialsSearchQuery:"",pubsSearchQuery:"",matchedSearchQuery:"",trialsFilters:{phase:"",status:""},pubsFilters:{pubYear:"",journalType:""},matchedFilters:{similarityThreshold:"0",trialPhase:""},modalVisible:!1,selectedTrial:null,selectedPublication:null,selectedMatch:null,matchTrialDetails:null,matchPubDetails:null,pubDetails:{},trialsSearchTimer:null,pubsSearchTimer:null,matchedSearchTimer:null,tabs:[{id:"trials",name:"Clinical Trials",icon:"fas fa-flask"},{id:"publications",name:"PubMed Publications",icon:"fas fa-book-open"},{id:"matched",name:"Matched Results",icon:"fas fa-link"}],aiSummary:"",aiLoading:!1,aiError:""}},created(){this.loadData()},computed:{dashboardStats(){return[{label:"Clinical Trials",value:this.trials.length,icon:"fas fa-flask"},{label:"Publications",value:this.publications.length,icon:"fas fa-book-open"},{label:"Matched Results",value:this.matchedResults.length,icon:"fas fa-link"},{label:"Sponsors",value:this.uniqueSponsors,icon:"fas fa-building"}]},uniqueSponsors(){const t=new Set;return this.trials.forEach((a=>{a.SponsorName&&t.add(a.SponsorName)})),t.size},filteredTrials(){let t=[...this.trials];if(this.trialsSearchQuery){const a=this.trialsSearchQuery.toLowerCase();t=t.filter((t=>t.BriefTitle&&t.BriefTitle.toLowerCase().includes(a)||t.NCTId&&t.NCTId.toLowerCase().includes(a)||t.SponsorName&&t.SponsorName.toLowerCase().includes(a)||t.Condition&&t.Condition.toLowerCase().includes(a)))}return this.trialsFilters.phase&&(t=t.filter((t=>t.Phase===this.trialsFilters.phase))),this.trialsFilters.status&&(t=t.filter((t=>t.OverallStatus===this.trialsFilters.status))),this.sortField&&t.sort(((t,a)=>{const e=t[this.sortField]||"",s=a[this.sortField]||"";return"string"===typeof e&&"string"===typeof s?"asc"===this.sortOrder?e.localeCompare(s):s.localeCompare(e):"asc"===this.sortOrder?e-s:s-e})),t},filteredPublications(){let t=[...this.publications];if(this.pubsSearchQuery){const a=this.pubsSearchQuery.toLowerCase();t=t.filter((t=>t.TITLE&&t.TITLE.toLowerCase().includes(a)||t.PMID&&t.PMID.includes(a)||t.ABSTRACT&&t.ABSTRACT.toLowerCase().includes(a)))}if(this.pubsFilters.pubYear)if("older"===this.pubsFilters.pubYear)t=t.filter((t=>{const a=t.PUBDATE?parseInt(t.PUBDATE.substring(0,4)):0;return a<2020}));else{const a=this.pubsFilters.pubYear;t=t.filter((t=>{const e=t.PUBDATE?t.PUBDATE.substring(0,4):"";return e===a}))}if(this.pubsFilters.journalType){const a=this.pubsFilters.journalType.toLowerCase();t=t.filter((t=>t.JOURNAL&&t.JOURNAL.toLowerCase().includes(a)))}return t},filteredMatched(){let t=[...this.matchedResults];if(this.matchedSearchQuery){const a=this.matchedSearchQuery.toLowerCase();t=t.filter((t=>t.NCTId&&t.NCTId.toLowerCase().includes(a)||t.TrialTitle&&t.TrialTitle.toLowerCase().includes(a)||t.BestPubPMID&&t.BestPubPMID.includes(a)))}if(this.matchedFilters.similarityThreshold&&parseFloat(this.matchedFilters.similarityThreshold)>0){const a=parseFloat(this.matchedFilters.similarityThreshold);t=t.filter((t=>parseFloat(t.SimilarityScore)>=a))}if(this.matchedFilters.trialPhase){const a=this.matchedFilters.trialPhase;t=t.filter((t=>{const e=this.trials.find((a=>a.NCTId===t.NCTId));return e&&e.Phase===a}))}return t},paginatedTrials(){const t=(this.currentPage-1)*this.itemsPerPage,a=t+this.itemsPerPage;return this.filteredTrials.slice(t,a)},paginatedPublications(){const t=(this.currentPage-1)*this.itemsPerPage,a=t+this.itemsPerPage;return this.filteredPublications.slice(t,a)},paginatedMatched(){const t=(this.currentPage-1)*this.itemsPerPage,a=t+this.itemsPerPage;return this.filteredMatched.slice(t,a)},totalPages(){let t=0;return"trials"===this.activeTab?t=this.filteredTrials.length:"publications"===this.activeTab?t=this.filteredPublications.length:"matched"===this.activeTab&&(t=this.filteredMatched.length),Math.max(1,Math.ceil(t/this.itemsPerPage))},trialPublications(){return this.selectedTrial&&this.selectedTrial.NCTId?this.matchedResults.filter((t=>t.NCTId===this.selectedTrial.NCTId)):[]},publicationTrials(){return this.selectedPublication&&this.selectedPublication.PMID?this.matchedResults.filter((t=>t.BestPubPMID===this.selectedPublication.PMID)):[]}},methods:{async loadData(){try{this.loading.initial=!0;const t=y(),a="https://lightidea.org:8001",[e,s,i,r]=await Promise.all([v.A.get(`${a}/get-filtered-trials`,{params:{user_token:t}}),v.A.get(`${a}/get-pubmed-summaries`,{params:{user_token:t}}),v.A.get(`${a}/get-matched-results`,{params:{user_token:t}}),v.A.get(`${a}/get-trial-csv`,{params:{user_token:t}})]);this.trials=e.data,this.publications=s.data,this.matchedResults=i.data,this.allTrialsCsv=r.data,this.publications.forEach((t=>{this.pubDetails[t.PMID]=t})),this.loading.initial=!1}catch(t){console.error("Error loading data:",t),this.loading.initial=!1,alert("Failed to load data. Please check the console for details.")}},setActiveTab(t){this.activeTab=t,this.currentPage=1,this.sortField=null,this.sortOrder="asc"},changePage(t){const a=this.currentPage+t;a>=1&&a<=this.totalPages&&(this.currentPage=a,window.scrollTo(0,0))},sortData(t,a){this.sortField===a?this.sortOrder="asc"===this.sortOrder?"desc":"asc":(this.sortField=a,this.sortOrder="asc")},getSortIconClass(t){return this.sortField!==t?"fas fa-sort":"asc"===this.sortOrder?"fas fa-sort-up":"fas fa-sort-down"},debounceTrialsSearch(){clearTimeout(this.trialsSearchTimer),this.trialsSearchTimer=setTimeout((()=>{this.currentPage=1}),300)},debouncePublicationsSearch(){clearTimeout(this.pubsSearchTimer),this.pubsSearchTimer=setTimeout((()=>{this.currentPage=1}),300)},debounceMatchedSearch(){clearTimeout(this.matchedSearchTimer),this.matchedSearchTimer=setTimeout((()=>{this.currentPage=1}),300)},showTrialDetails(t){this.selectedTrial=t,this.selectedPublication=null,this.selectedMatch=null,this.modalVisible=!0},showPublicationDetails(t){this.selectedPublication=t,this.selectedTrial=null,this.selectedMatch=null,this.modalVisible=!0},async showMatchDetails(t){if(this.selectedMatch=t,this.selectedTrial=null,this.selectedPublication=null,this.modalVisible=!0,this.matchTrialDetails=this.trials.find((a=>a.NCTId===t.NCTId)),this.pubDetails[t.BestPubPMID])this.matchPubDetails=this.pubDetails[t.BestPubPMID];else try{const a="https://lightidea.org:8001",e=await v.A.get(`${a}/get-pubmed-summaries-by-PMID/${t.BestPubPMID}`);this.pubDetails[t.BestPubPMID]=e.data,this.matchPubDetails=e.data}catch(a){console.error("Error fetching publication details:",a)}},async fetchAndShowPubDetails(t){try{if(this.loading.publications=!0,this.pubDetails[t])this.showPublicationDetails(this.pubDetails[t]);else{const a="https://lightidea.org:8001",e=await v.A.get(`${a}/get-pubmed-summaries-by-PMID/${t}`);this.pubDetails[t]=e.data,this.showPublicationDetails(e.data)}}catch(a){console.error(`Error fetching publication details for PMID ${t}:`,a),alert(`Failed to load publication details for PMID ${t}`)}finally{this.loading.publications=!1}},showTrialById(t){const a=this.trials.find((a=>a.NCTId===t));a&&this.showTrialDetails(a)},closeModal(){this.modalVisible=!1,this.selectedTrial=null,this.selectedPublication=null,this.selectedMatch=null,this.matchTrialDetails=null,this.matchPubDetails=null},truncateText(t,a){return t?t.length>a?t.substring(0,a)+"...":t:""},getPhaseClass(t){return t?t.includes("1")?"phase1":t.includes("2")?"phase2":t.includes("3")?"phase3":t.includes("4")?"phase4":"na":"na"},getStatusClass(t){if(!t)return"unknown";const a=t.toLowerCase();return a.includes("recruiting")?"recruiting":a.includes("completed")?"completed":a.includes("active")?"active":a.includes("withdrawn")?"withdrawn":"unknown"},async getAISummary(){if(!this.aiLoading){this.aiLoading=!0,this.aiError="",this.aiSummary="";try{const t=y(),a="https://lightidea.org:8001",e=await v.A.get(`${a}/ai-summarize`,{params:{user_token:t}});e.data=e.data.replace(/```html/g,""),this.aiSummary=e.data.replace(/```/g,"")}catch(t){console.error(t),this.aiError="Failed to load AI summary. Try again later."}finally{this.aiLoading=!1}}}}},R=L,O=(0,o.A)(R,I,A,!1,null,"9fbcfc8e",null),B=O.exports;s.A.use(d.Ay);var U=new d.Ay({mode:"history",routes:[{path:"/",name:"PipelineForm",component:w},{path:"/reports",name:"Reports",component:B}]}),Q=(e(3855),{inserted(t,a){const e=a.value||"animate__fadeIn";t.classList.add("animate__animated"),t.style.opacity="0";const s=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(t.target.style.opacity="1",t.target.classList.add(e),s.unobserve(t.target))}))}),{threshold:.1,rootMargin:"0px 0px -50px 0px"});s.observe(t),t._observer=s},unbind(t){t._observer&&(t._observer.disconnect(),delete t._observer)}});s.A.config.productionTip=!1,s.A.directive("animate-on-scroll",Q),new s.A({render:t=>t(u),router:U}).$mount("#app")}},a={};function e(s){var i=a[s];if(void 0!==i)return i.exports;var r=a[s]={exports:{}};return t[s].call(r.exports,r,r.exports,e),r.exports}e.m=t,function(){var t=[];e.O=function(a,s,i,r){if(!s){var l=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],r=t[u][2];for(var n=!0,o=0;o<s.length;o++)(!1&r||l>=r)&&Object.keys(e.O).every((function(t){return e.O[t](s[o])}))?s.splice(o--,1):(n=!1,r<l&&(l=r));if(n){t.splice(u--,1);var c=i();void 0!==c&&(a=c)}}return a}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[s,i,r]}}(),function(){e.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(a,{a:a}),a}}(),function(){e.d=function(t,a){for(var s in a)e.o(a,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:a[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};e.O.j=function(a){return 0===t[a]};var a=function(a,s){var i,r,l=s[0],n=s[1],o=s[2],c=0;if(l.some((function(a){return 0!==t[a]}))){for(i in n)e.o(n,i)&&(e.m[i]=n[i]);if(o)var u=o(e)}for(a&&a(s);c<l.length;c++)r=l[c],e.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return e.O(u)},s=self["webpackChunkmedical_research_pipeline"]=self["webpackChunkmedical_research_pipeline"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=e.O(void 0,[504],(function(){return e(3238)}));s=e.O(s)})();
//# sourceMappingURL=app.043fd8d8.js.map